# Strapi 演示项目分析文档

## 项目概述

这是一个基于 Strapi v5.28.0 的演示项目，展示了一个完整的博客/内容管理系统。项目使用 SQLite 作为默认数据库，包含了文章、作者、分类等核心内容类型，以及丰富的共享组件。

## 技术栈

- **框架**: Strapi v5.28.0
- **数据库**: SQLite (默认), 支持 MySQL 和 PostgreSQL
- **前端**: React 18, React Router DOM 6, Styled Components 6
- **Node.js**: 18.0.0 - 22.x.x
- **包管理器**: npm >= 6.0.0

## 项目结构分析

### 1. 配置文件 (`config/`)

#### `admin.js` - 管理面板配置
- JWT 密钥配置
- API Token 盐值
- 传输令牌配置
- 功能标志 (NPS, EE 推广)

#### `database.js` - 数据库配置
- 支持多种数据库: SQLite, MySQL, PostgreSQL
- 连接池配置
- SSL 支持
- 默认使用 SQLite (`.tmp/data.db`)

#### `server.js` - 服务器配置
- 主机: 0.0.0.0
- 端口: 1337
- 应用密钥配置
- Webhook 配置

### 2. API 结构 (`src/api/`)

#### 内容类型 (Content Types)

##### Article (文章)
- **类型**: Collection Type
- **功能**: 博客文章管理
- **字段**:
  - `title`: 文章标题
  - `description`: 文章描述 (最大80字符)
  - `slug`: URL友好的唯一标识符
  - `cover`: 封面图片
  - `author`: 作者关联 (多对一)
  - `category`: 分类关联 (多对一)
  - `blocks`: 动态区域，支持多种组件
- **特性**: 支持草稿和发布状态

##### Author (作者)
- **类型**: Collection Type
- **字段**:
  - `name`: 作者姓名
  - `avatar`: 头像
  - `email`: 邮箱
  - `articles`: 文章关联 (一对多)
- **特性**: 不支持草稿状态

##### Category (分类)
- **类型**: Collection Type
- **字段**:
  - `name`: 分类名称
  - `slug`: URL标识符
  - `description`: 分类描述
  - `articles`: 文章关联 (一对多)
- **特性**: 不支持草稿状态

##### About (关于页面)
- **类型**: Single Type
- **字段**:
  - `title`: 页面标题
  - `blocks`: 动态区域内容
- **特性**: 单例类型，不支持草稿

##### Global (全局设置)
- **类型**: Single Type
- **字段**:
  - `siteName`: 网站名称 (必填)
  - `favicon`: 网站图标
  - `siteDescription`: 网站描述 (必填)
  - `defaultSeo`: 默认SEO设置
- **特性**: 单例类型，不支持草稿

### 3. 共享组件 (`src/components/shared/`)

#### Media (媒体组件)
- 支持图片、文件、视频
- 单文件上传

#### Rich Text (富文本组件)
- 支持富文本编辑
- 用于文章内容

#### Quote (引用组件)
- `title`: 引用标题
- `body`: 引用内容

#### Slider (轮播组件)
- 支持多图片轮播
- 仅支持图片类型

#### SEO (SEO组件)
- `metaTitle`: 页面标题 (必填)
- `metaDescription`: 页面描述 (必填)
- `shareImage`: 分享图片

### 4. 数据种子 (`scripts/seed.js`)

#### 功能特性
- 自动检测首次运行
- 批量导入示例数据
- 文件上传处理
- 权限设置 (公开访问)
- 支持多种文件类型

#### 导入流程
1. 设置公开权限
2. 导入分类
3. 导入作者
4. 导入文章
5. 导入全局设置
6. 导入关于页面

### 5. 静态资源 (`data/`)

#### 示例图片
- 咖啡相关图片 (coffee-art.jpg, coffee-beans.jpg, coffee-shadow.jpg)
- 网络梗图 (a-bug-is-becoming-a-meme-on-the-internet.jpg)
- 用户头像 (daviddoe@strapi.io.jpg, sarahbaker@strapi.io.jpg)
- 其他示例图片

## 核心功能

### 1. 内容管理
- **文章系统**: 支持标题、描述、封面、作者、分类
- **动态内容**: 使用动态区域支持多种内容块
- **草稿系统**: 文章支持草稿和发布状态

### 2. 用户权限
- **公开访问**: 所有内容类型支持公开读取
- **权限控制**: 基于角色的权限管理

### 3. 媒体管理
- **文件上传**: 支持图片、文件、视频
- **文件处理**: 自动检测文件类型和大小
- **重复检测**: 避免重复上传相同文件

### 4. SEO优化
- **全局SEO**: 网站级别的SEO设置
- **页面SEO**: 每个页面独立的SEO配置
- **分享图片**: 社交媒体分享优化

## 数据关系

```
Global (1) ←→ (1) SEO
Author (1) ←→ (N) Article
Category (1) ←→ (N) Article
Article (N) ←→ (N) Blocks (Media, Rich Text, Quote, Slider)
About (1) ←→ (N) Blocks
```

## 部署和运行

### 开发环境
```bash
npm run develop
# 或
yarn develop
```

### 生产环境
```bash
npm run start
# 或
yarn start
```

### 构建
```bash
npm run build
# 或
yarn build
```

### 数据种子
```bash
npm run seed:example
# 或
yarn seed:example
```

## 项目特点

1. **模块化设计**: 清晰的内容类型分离
2. **灵活的内容结构**: 动态区域支持复杂内容布局
3. **完整的权限系统**: 支持公开和私有内容访问
4. **SEO友好**: 内置SEO优化功能
5. **媒体管理**: 完整的文件上传和管理系统
6. **示例数据**: 提供完整的演示数据

## 适用场景

- 个人博客
- 企业官网
- 内容管理系统
- 多作者博客平台
- 新闻网站

## 扩展建议

1. **用户系统**: 添加用户注册和登录功能
2. **评论系统**: 为文章添加评论功能
3. **标签系统**: 增加文章标签功能
4. **搜索功能**: 添加全文搜索
5. **多语言支持**: 国际化内容管理
6. **API文档**: 自动生成API文档

---

*此文档基于 Strapi v5.28.0 项目结构分析生成*
